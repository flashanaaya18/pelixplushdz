<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ajustes - Pelixplushd</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" sizes="32x32" href="fondo.png">
    <link rel="icon" type="image/png" sizes="16x16" href="fondo.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="estilos.css?v=4">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#141414">
    <style>
        /* Estilos para la secci贸n de Pedidos VIP */
        .request-search-container {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        .request-results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 15px;
            max-height: 500px;
            overflow-y: auto;
            padding-right: 5px;
        }
        .request-card {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            background: #222;
            transition: transform 0.2s ease;
        }
        .request-card:hover { transform: scale(1.03); z-index: 2; box-shadow: 0 4px 10px rgba(0,0,0,0.5); }
        .request-card img { width: 100%; height: 180px; object-fit: cover; display: block; }
        .request-info { padding: 8px; font-size: 0.8rem; color: #fff; text-align: center; }
        .request-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            opacity: 0; transition: opacity 0.2s;
        }
        .request-card:hover .request-overlay { opacity: 1; }
        .btn-request-action {
            background: linear-gradient(135deg, #e50914, #ff4d4d);
            color: white; border: none; padding: 8px 15px; border-radius: 20px;
            cursor: pointer; font-weight: bold; font-size: 0.85rem;
            box-shadow: 0 2px 5px rgba(229,9,20,0.4);
        }

        /* Estilos para el Modal de Solicitud VIP */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); z-index: 2000;
            display: flex; justify-content: center; align-items: center;
            backdrop-filter: blur(8px); opacity: 0; pointer-events: none;
            transition: opacity 0.3s ease;
        }
        .modal-overlay.active { opacity: 1; pointer-events: auto; }
        .modal-content {
            background: #1f1f1f; padding: 25px; border-radius: 16px;
            width: 90%; max-width: 450px; position: relative;
            border: 1px solid #333; box-shadow: 0 20px 50px rgba(0,0,0,0.6);
            transform: translateY(20px); transition: transform 0.3s ease;
        }
        .modal-overlay.active .modal-content { transform: translateY(0); }
        .close-modal {
            position: absolute; top: 15px; right: 20px; font-size: 24px; cursor: pointer; color: #aaa; transition: color 0.2s;
        }
        .close-modal:hover { color: #fff; }
        .modal-header h2 { margin-top: 0; font-size: 1.5rem; color: #fff; border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 20px; }
        .selected-content-preview {
            display: flex; gap: 15px; margin-bottom: 20px; background: #2a2a2a; padding: 12px; border-radius: 10px; align-items: center;
        }
        .selected-content-preview img { width: 60px; height: 90px; object-fit: cover; border-radius: 6px; box-shadow: 0 2px 5px rgba(0,0,0,0.3); }
        .selected-info h3 { margin: 0 0 5px 0; font-size: 1.1rem; color: #fff; line-height: 1.2; }
        .selected-info p { margin: 0; color: #ccc; font-size: 0.9rem; }
        .badge { display: inline-block; background: #e50914; color: white; padding: 2px 8px; border-radius: 4px; font-size: 0.75rem; margin-top: 5px; text-transform: uppercase; font-weight: bold; }
        .form-group label { display: block; color: #ddd; margin-bottom: 8px; font-size: 0.9rem; }
        .form-group textarea {
            width: 100%; height: 100px; background: #141414; border: 1px solid #444;
            color: white; padding: 12px; border-radius: 8px; resize: none;
            font-family: 'Outfit', sans-serif; font-size: 0.95rem; outline: none; transition: border-color 0.2s;
        }
        .form-group textarea:focus { border-color: #e50914; }

        /* Estilos para Mis Solicitudes (LocalStorage) */
        .my-request-item {
            background: #2a2a2a; border-radius: 8px; padding: 10px; display: flex; gap: 10px; align-items: center;
            border-left: 4px solid #e50914; margin-bottom: 10px; position: relative;
        }
        .my-request-item img { width: 40px; height: 60px; object-fit: cover; border-radius: 4px; }
        .my-request-info h4 { margin: 0; font-size: 0.95rem; color: white; }
        .my-request-info span { font-size: 0.8rem; color: #aaa; }
        .request-status { position: absolute; right: 10px; top: 10px; font-size: 0.7rem; padding: 2px 6px; border-radius: 4px; background: #444; color: #ccc; }
        .request-status.available { background: #2ecc71; color: white; }
        .request-status.pending { background: #e67e22; color: white; }

        /* Estilos para el Switch de Auto-Login */
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        .switch input { 
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            -webkit-transition: .4s;
            transition: .4s;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            -webkit-transition: .4s;
            transition: .4s;
        }
        input:checked + .slider { background-color: #e50914; }
        input:focus + .slider { box-shadow: 0 0 1px #e50914; }
        input:checked + .slider:before { transform: translateX(26px); }
        .slider.round { border-radius: 34px; }
        .slider.round:before { border-radius: 50%; }
    </style>
</head>

<body data-page="Ajustes">

    <header id="main-header" class="navbar">
        <div class="logo-container">
            <a href="index.html" class="logo"><img src="fondo.png" alt="Pelixplushd Logo" class="logo-icon">Pelix<span></span>plushd</a>
        </div>
        <nav class="desktop-nav">
            <a href="index.html">Inicio</a>
            <a href="peliculas.html">Pel铆culas</a>
            <a href="series.html">Series</a>
            <a href="animes1.html">Anime</a>
            <a href="ajustes.html" class="active">Ajustes</a>
        </nav>
        <div class="nav-actions">
            <button id="hamburger-btn" class="mobile-toggle"><i class="fas fa-bars"></i></button>
        </div>
    </header>

    <aside id="side-menu" class="mobile-menu">
        <div class="mobile-menu-header">
            <div class="logo"><img src="fondo.png" alt="Pelixplushd Logo" class="logo-icon">Pelix<span>plushd</span></div>
            <button id="close-side-menu-btn"><i class="fas fa-times"></i></button>
        </div>
        <nav class="mobile-nav-links">
            <a href="index.html"><i class="fas fa-home"></i> Inicio</a>
            <a href="peliculas.html"><i class="fas fa-film"></i> Pel铆culas</a>
            <a href="series.html"><i class="fas fa-tv"></i> Series</a>
            <a href="animes1.html"><i class="fas fa-dragon"></i> Anime</a>
            <a href="ajustes.html" class="active"><i class="fas fa-cog"></i> Ajustes</a>
            <a href="favoritos.html"><i class="fas fa-heart"></i> Favoritos</a>
        </nav>
    </aside>
    <div id="menu-overlay" class="menu-overlay"></div>

    <main>
        <div class="ajustes-container">
            <h1><i class="fas fa-cog"></i> Ajustes y Configuraci贸n</h1>

            <!-- Secci贸n VIP Din谩mica -->
            <section class="setting-group" id="vip-subscription-section" style="display:none; border: 1px solid #e50914; padding: 15px; border-radius: 8px; background: rgba(229, 9, 20, 0.1);">
                <h2 style="color: #e50914; border-bottom-color: #e50914;"> Mi Suscripci贸n VIP</h2>
                <div class="setting-item">
                    <span>Usuario</span>
                    <span id="vip-username-display" style="font-weight:bold; color:white;">--</span>
                </div>
                <div class="setting-item">
                    <span>Fecha de Vencimiento</span>
                    <span id="vip-expiration-date" style="color: #ccc;">--</span>
                </div>
                <div class="setting-item">
                    <span>Tiempo Restante</span>
                    <span id="vip-time-remaining" style="font-size: 1.1rem; font-weight: bold; color: #fff;">Calculando...</span>
                </div>
                <div class="setting-item">
                    <button id="btn-renew-vip" class="btn-setting" style="width:100%; background-color: #25D366; color: white; margin-top:10px;">
                        <i class="fab fa-whatsapp"></i> Renovar Suscripci贸n
                    </button>
                </div>
                <div class="setting-item" style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 15px;">
                    <span><i class="fas fa-magic"></i> Inicio de Sesi贸n Autom谩tico</span>
                    <label class="switch">
                        <input type="checkbox" id="auto-login-toggle">
                        <span class="slider round"></span>
                    </label>
                </div>
            </section>

            <!-- Secci贸n de Pedidos VIP (Nueva) -->
            <section class="setting-group" id="vip-requests-section" style="display:none; border: 1px solid #FFD700; padding: 15px; border-radius: 8px; background: rgba(255, 215, 0, 0.05);">
                <h2 style="color: #FFD700; border-bottom-color: #FFD700;"><i class="fas fa-gift"></i> Pide tu Pel铆cula/Serie</h2>
                <p style="color: #ccc; font-size: 0.9rem; margin-bottom: 15px;">驴No encuentras lo que buscas? Como usuario VIP, puedes pedirlo directamente.</p>
                <div class="request-search-container">
                    <input type="text" id="request-search-input" placeholder="Buscar pel铆cula o serie en TMDb..." class="vip-input" style="margin-bottom:0;">
                    <button id="request-search-btn" class="validate-btn" style="width: auto; padding: 0 20px;"><i class="fas fa-search"></i></button>
                </div>
                <div id="request-results" class="request-results-grid"></div>
                
                <div id="my-requests-container" style="margin-top: 30px; border-top: 1px solid #333; padding-top: 20px;">
                    <h3 style="color: #fff; font-size: 1.1rem; margin-bottom: 15px;"><i class="fas fa-history"></i> Mis Solicitudes</h3>
                    <div id="my-requests-list"></div>
                </div>
            </section>

            <!-- Secci贸n Membres铆a Gratuita (Nueva) -->
            <section class="setting-group" id="free-subscription-section" style="display:none; border: 1px solid #444; padding: 15px; border-radius: 8px; background: rgba(255, 255, 255, 0.05);">
                <h2 style="color: #ccc; border-bottom-color: #444;"> Mi Membres铆a</h2>
                <div class="setting-item">
                    <span>Estado Actual</span>
                    <span style="font-weight:bold; color:white; background: #333; padding: 4px 10px; border-radius: 4px; font-size: 0.9rem;">GRATUITO</span>
                </div>
                <div class="setting-item" style="display:block; margin-top:10px;">
                    <p style="font-size: 0.9rem; color: #aaa; margin-bottom: 15px; line-height: 1.4;">
                        Tienes acceso limitado al cat谩logo. <br>
                        <span style="color: #e50914;">隆Hazte VIP para ver todo sin l铆mites!</span>
                    </p>
                    <button id="btn-upgrade-vip" class="btn-setting" style="width:100%; background: linear-gradient(135deg, #e50914, #ff4d4d); color: white; font-weight: bold; border: none; box-shadow: 0 4px 15px rgba(229,9,20,0.3);">
                        <i class="fas fa-crown"></i> Activar Plan VIP
                    </button>
                </div>
            </section>

            <!-- Secci贸n Canjear C贸digo VIP (Manual) -->
            <section class="setting-group" id="redeem-code-section" style="border: 1px solid #333; padding: 15px; border-radius: 8px; background: rgba(255, 255, 255, 0.05); margin-top: 20px;">
                <h2 style="color: #fff; border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 15px; font-size: 1.2rem;"><i class="fas fa-key"></i> Activar C贸digo VIP</h2>
                <p style="color: #aaa; font-size: 0.9rem; margin-bottom: 15px;">Ingresa tu c贸digo de acceso para desbloquear funciones premium al instante.</p>
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <input type="text" id="settings-vip-code-input" class="vip-input" placeholder="C贸digo de acceso" style="flex: 1; padding: 12px; background: #141414; border: 1px solid #444; color: white; border-radius: 8px; outline: none;">
                    <button id="btn-redeem-code" class="validate-btn" style="width: auto; padding: 0 20px; border-radius: 8px; font-size: 0.9rem;">Validar</button>
                </div>
                <p id="redeem-message" style="display:none; margin-top: 10px; font-size: 0.9rem; font-weight: bold;"></p>
            </section>

            <!-- Secci贸n Servidores (Nueva) -->
            <section class="setting-group" id="servers-section" style="border: 1px solid #333; padding: 15px; border-radius: 8px; background: rgba(255, 255, 255, 0.05); margin-top: 20px;">
                <h2 style="color: #fff; border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 15px; font-size: 1.2rem;"><i class="fas fa-server"></i> Servidores</h2>
                <p style="color: #aaa; font-size: 0.9rem; margin-bottom: 15px;">Si tienes problemas de reproducci贸n, intenta con nuestro servidor alternativo.</p>
                <a href="https://pelixplushdz.netlify.app/" class="btn-setting" target="_blank" style="width:100%; background: linear-gradient(45deg, #00c6ff, #0072ff); color: white; font-weight: bold; border: none; box-shadow: 0 4px 15px rgba(0, 114, 255, 0.3); text-align: center; display: block; text-decoration: none; padding: 12px; border-radius: 8px;">
                    <i class="fas fa-external-link-alt"></i> Ir a Servidor 2 nueva mejor optinizado sin caida de servidores movil y pc se estaran traspasando unicamente peliculas
                </a>
            </section>

        </div>
    </main>

    <footer class="main-footer">
        <div class="footer-bottom">
            <p>&copy; 2025 Pelixplushd. Todos los derechos reservados.</p>
        </div>
    </footer>

    <nav class="bottom-nav">
        <a href="index.html" class="nav-item"><i class="fas fa-home"></i><span>Inicio</span></a>
        <a href="buscar.html" class="nav-item"><i class="fas fa-search"></i><span>Buscar</span></a>
        <a href="favoritos.html" class="nav-item"><i class="fas fa-heart"></i><span>Favoritos</span></a>
        <a href="ajustes.html" class="nav-item active"><i class="fas fa-cog"></i><span>Ajustes</span></a>
    </nav>

    <!-- Modal de Solicitud VIP -->
    <div id="request-modal" class="modal-overlay">
        <div class="modal-content">
            <span class="close-modal" id="close-request-modal">&times;</span>
            <div class="modal-header">
                <h2><i class="fas fa-ticket-alt"></i> Confirmar Solicitud</h2>
            </div>
            <div class="modal-body">
                <div class="selected-content-preview">
                    <img id="modal-poster" src="fondo.png" alt="Poster">
                    <div class="selected-info">
                        <h3 id="modal-title">T铆tulo</h3>
                        <p id="modal-year">A帽o</p>
                        <span id="modal-type" class="badge">PELCULA</span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="request-notes">Notas adicionales (Opcional):</label>
                    <textarea id="request-notes" placeholder="Ej: Audio Latino, Subtitulada, Temporada espec铆fica..."></textarea>
                </div>
                <button id="confirm-request-btn" class="btn-setting" style="width: 100%; background: linear-gradient(135deg, #e50914, #ff4d4d); margin-top: 20px; color: white; font-weight: bold; padding: 12px; border: none; border-radius: 8px; font-size: 1rem; box-shadow: 0 4px 15px rgba(229,9,20,0.3);"><i class="fas fa-paper-plane"></i> Enviar Solicitud</button>
            </div>
        </div>
    </div>

    <div id="notification-container" class="toast-container"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/lz-string/1.4.4/lz-string.min.js"></script>
    <script src="peliculas.js"></script>
    <script src="peliculas1.js"></script>
    <script src="peliculas2.js"></script>
    <script src="peliculas3.js"></script>
    <script src="series.js"></script>
    <script src="script.js?v=4"></script>
    <script src="ajustes.js?v=4"></script>
    <script>
        let deferredPrompt;
    </script>
</body>

</html>